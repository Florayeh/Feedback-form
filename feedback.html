<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Course Feedback System</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background-color: #f5f8fa;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }
        
        .container {
            background-color: white;
            border-radius: 12px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            padding: 30px;
            margin-top: 20px;
            min-height: 500px;
        }
        
        header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        
        h1 {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2.2rem;
        }
        
        .subtitle {
            color: #7f8c8d;
            font-size: 1.1rem;
        }
        
        .privacy-note {
            background-color: #e8f4fc;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin-bottom: 25px;
            border-radius: 0 8px 8px 0;
        }
        
        .privacy-note i {
            color: #3498db;
            margin-right: 8px;
        }
        
        .rating-section {
            margin-bottom: 35px;
        }
        
        h2 {
            color: #2c3e50;
            margin-bottom: 20px;
            font-size: 1.5rem;
        }
        
        .rating-item {
            display: flex;
            flex-wrap: wrap;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 18px;
            border-bottom: 1px dashed #eee;
        }
        
        .rating-label {
            flex: 1;
            min-width: 250px;
            font-weight: 500;
            color: #34495e;
        }
        
        .rating-scale {
            display: flex;
            flex-wrap: wrap;
            gap: 5px;
            margin-top: 8px;
        }
        
        .rating-option {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-right: 10px;
        }
        
        .rating-number {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.2s ease;
            border: 2px solid #ddd;
            background-color: #f9f9f9;
        }
        
        .rating-number:hover {
            background-color: #e3f2fd;
            border-color: #3498db;
        }
        
        .rating-number.selected {
            background-color: #3498db;
            color: white;
            border-color: #2980b9;
        }
        
        .rating-text {
            font-size: 0.75rem;
            color: #7f8c8d;
            margin-top: 4px;
            text-align: center;
            min-width: 80px;
        }
        
        .open-ended {
            margin-bottom: 30px;
        }
        
        textarea {
            width: 100%;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 1rem;
            resize: vertical;
            min-height: 120px;
            transition: border 0.3s;
        }
        
        textarea:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 2px rgba(52, 152, 219, 0.2);
        }
        
        .question-label {
            display: block;
            margin-bottom: 10px;
            font-weight: 500;
            color: #34495e;
        }
        
        .form-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #eee;
        }
        
        .submit-btn {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 14px 32px;
            font-size: 1.1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-weight: 600;
        }
        
        .submit-btn:hover {
            background-color: #2980b9;
        }
        
        .reset-btn, .instructor-btn {
            background-color: #f8f9fa;
            color: #555;
            border: 1px solid #ddd;
            padding: 14px 24px;
            font-size: 1rem;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .reset-btn:hover, .instructor-btn:hover {
            background-color: #e9ecef;
        }
        
        .instructor-btn {
            background-color: #2ecc71;
            color: white;
            border-color: #27ae60;
        }
        
        .instructor-btn:hover {
            background-color: #27ae60;
        }
        
        .footer-note {
            text-align: center;
            color: #95a5a6;
            font-size: 0.9rem;
            margin-top: 25px;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }
        
        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }
            
            .rating-item {
                flex-direction: column;
                align-items: flex-start;
            }
            
            .rating-label {
                margin-bottom: 15px;
                min-width: 100%;
            }
            
            .form-footer {
                flex-direction: column;
                gap: 15px;
            }
            
            .submit-btn, .reset-btn, .instructor-btn {
                width: 100%;
                text-align: center;
            }
        }
        
        .rating-description {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-top: 5px;
            margin-bottom: 15px;
        }
        
        .counter {
            text-align: right;
            font-size: 0.8rem;
            color: #95a5a6;
            margin-top: 5px;
        }
        
        /* Dashboard Styles */
        .dashboard-container {
            display: none;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background: white;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.08);
            text-align: center;
            border-top: 4px solid #3498db;
        }
        
        .stat-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: #2c3e50;
            margin: 10px 0;
        }
        
        .stat-label {
            color: #7f8c8d;
            font-size: 0.9rem;
        }
        
        .feedback-list {
            max-height: 500px;
            overflow-y: auto;
            border: 1px solid #eee;
            border-radius: 8px;
            padding: 10px;
            margin-top: 20px;
        }
        
        .feedback-item {
            background: #f9f9f9;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #3498db;
        }
        
        .feedback-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
            font-size: 0.9rem;
            color: #7f8c8d;
        }
        
        .feedback-ratings {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 10px;
            margin: 15px 0;
        }
        
        .rating-display {
            background: white;
            padding: 8px;
            border-radius: 5px;
            text-align: center;
        }
        
        .rating-value {
            font-weight: bold;
            color: #3498db;
            font-size: 1.2rem;
        }
        
        .rating-label-small {
            font-size: 0.8rem;
            color: #7f8c8d;
        }
        
        .back-btn {
            margin-bottom: 20px;
        }
        
        /* Login Form */
        .login-container {
            max-width: 400px;
            margin: 50px auto;
            text-align: center;
        }
        
        .login-box {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
        }
        
        .login-input {
            width: 100%;
            padding: 12px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1rem;
        }
        
        .login-btn {
            width: 100%;
            padding: 12px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 5px;
            font-size: 1rem;
            cursor: pointer;
            margin-top: 10px;
        }
        
        .login-btn:hover {
            background-color: #2980b9;
        }
        
        .error-message {
            color: #e74c3c;
            margin-top: 10px;
            font-size: 0.9rem;
        }
        
        /* Navigation */
        .nav-tabs {
            display: flex;
            margin-bottom: 20px;
            border-bottom: 1px solid #eee;
        }
        
        .tab-btn {
            padding: 10px 20px;
            background: none;
            border: none;
            border-bottom: 3px solid transparent;
            font-size: 1rem;
            cursor: pointer;
            color: #7f8c8d;
        }
        
        .tab-btn.active {
            color: #3498db;
            border-bottom-color: #3498db;
            font-weight: 500;
        }
        
        .tab-content {
            display: none;
        }
        
        .tab-content.active {
            display: block;
        }
        
        /* Export buttons */
        .export-buttons {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .export-btn {
            padding: 10px 15px;
            background-color: #2ecc71;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .export-btn:hover {
            background-color: #27ae60;
        }
        
        .export-btn.secondary {
            background-color: #3498db;
        }
        
        .export-btn.secondary:hover {
            background-color: #2980b9;
        }
    </style>
</head>
<body>
    <!-- Main Navigation -->
    <div class="nav-tabs" id="navTabs">
        <button class="tab-btn active" data-tab="feedback">Feedback Form</button>
        <button class="tab-btn" data-tab="instructor">Instructor View</button>
    </div>
    
    <div class="container">
        <!-- Student Feedback Form -->
        <div id="feedbackTab" class="tab-content active">
            <header>
                <h1>Anonymous Course Feedback</h1>
                <p class="subtitle">Please provide your honest feedback about the course. All information is collected anonymously.</p>
            </header>
            
            <div class="privacy-note">
                <i class="fas fa-user-secret"></i>
                <span>This feedback form is completely anonymous. No personal information is collected.</span>
            </div>
            
            <form id="feedbackForm">
                <div class="rating-section">
                    <h2>Course Ratings (1-5)</h2>
                    <p class="rating-description">1 = Very Dissatisfied, 5 = Very Satisfied</p>
                    
                    <div class="rating-item">
                        <div class="rating-label">Course Design</div>
                        <div class="rating-scale" id="rating-course-design">
                            <!-- Rating options will be generated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="rating-item">
                        <div class="rating-label">Teaching Style</div>
                        <div class="rating-scale" id="rating-teaching-style">
                            <!-- Rating options will be generated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="rating-item">
                        <div class="rating-label">Course Workload</div>
                        <div class="rating-scale" id="rating-course-workload">
                            <!-- Rating options will be generated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="rating-item">
                        <div class="rating-label">Discussions</div>
                        <div class="rating-scale" id="rating-discussions">
                            <!-- Rating options will be generated by JavaScript -->
                        </div>
                    </div>
                    
                    <div class="rating-item">
                        <div class="rating-label">Communication with Professor</div>
                        <div class="rating-scale" id="rating-communication">
                            <!-- Rating options will be generated by JavaScript -->
                        </div>
                    </div>
                </div>
                
                <div class="open-ended">
                    <label class="question-label">Open-ended Question: How can this course be improved?</label>
                    <textarea id="improvement" placeholder="Please share your suggestions..."></textarea>
                    <div class="counter"><span id="improvement-counter">0</span>/1000 characters</div>
                </div>
                
                <div class="open-ended">
                    <label class="question-label">Open-ended Question: Any suggestions for the TA?</label>
                    <textarea id="ta-suggestions" placeholder="Please share your suggestions..."></textarea>
                    <div class="counter"><span id="ta-suggestions-counter">0</span>/1000 characters</div>
                </div>
                
                <div class="form-footer">
                    <button type="button" class="reset-btn" id="resetBtn">
                        <i class="fas fa-redo"></i> Reset Form
                    </button>
                    <button type="submit" class="submit-btn">
                        <i class="fas fa-paper-plane"></i> Submit Feedback
                    </button>
                </div>
            </form>
        </div>
        
        <!-- Instructor Dashboard (Password Protected) -->
        <div id="instructorTab" class="tab-content">
            <div id="loginView">
                <div class="login-container">
                    <div class="login-box">
                        <h2><i class="fas fa-lock"></i> Instructor Access</h2>
                        <p style="margin: 15px 0; color: #7f8c8d;">Enter the instructor password to view feedback data</p>
                        
                        <input type="password" id="instructorPassword" class="login-input" placeholder="Enter password">
                        <button id="loginBtn" class="login-btn">Access Dashboard</button>
                        
                        <div id="loginError" class="error-message" style="display: none;">
                            Incorrect password. Please try again.
                        </div>
                        
                        <p style="margin-top: 20px; font-size: 0.9rem; color: #95a5a6;">
                            <i class="fas fa-info-circle"></i> Default password is "instructor123"
                        </p>
                    </div>
                </div>
            </div>
            
            <div id="dashboardView" style="display: none;">
                <header>
                    <h1>Course Feedback Dashboard</h1>
                    <p class="subtitle">View and analyze all collected feedback</p>
                </header>
                
                <button class="back-btn reset-btn" id="logoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
                
                <!-- Statistics -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-label">Total Submissions</div>
                        <div class="stat-value" id="totalSubmissions">0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Avg. Course Design</div>
                        <div class="stat-value" id="avgCourseDesign">0.0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Avg. Teaching Style</div>
                        <div class="stat-value" id="avgTeachingStyle">0.0</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-label">Avg. Course Workload</div>
                        <div class="stat-value" id="avgWorkload">0.0</div>
                    </div>
                </div>
                
                <!-- Export Options -->
                <div class="export-buttons">
                    <button class="export-btn" id="exportJsonBtn">
                        <i class="fas fa-download"></i> Download as JSON
                    </button>
                    <button class="export-btn secondary" id="exportCsvBtn">
                        <i class="fas fa-file-csv"></i> Download as CSV
                    </button>
                    <button class="export-btn" id="exportTxtBtn">
                        <i class="fas fa-file-alt"></i> Download as Text
                    </button>
                    <button class="reset-btn" id="clearDataBtn">
                        <i class="fas fa-trash"></i> Clear All Data
                    </button>
                </div>
                
                <!-- Feedback List -->
                <h2>All Feedback Submissions</h2>
                <div class="feedback-list" id="feedbackList">
                    <!-- Feedback items will be added here -->
                </div>
            </div>
        </div>
    </div>
    
    <div class="footer-note">
        <p>Course Feedback System &copy; 2024 | All feedback is anonymous</p>
    </div>

    <script>
        // Default instructor password (you can change this)
        const INSTRUCTOR_PASSWORD = "instructor123";
        
        // Define rating items
        const ratingItems = [
            { id: 'course-design', label: 'Course Design' },
            { id: 'teaching-style', label: 'Teaching Style' },
            { id: 'course-workload', label: 'Course Workload' },
            { id: 'discussions', label: 'Discussions' },
            { id: 'communication', label: 'Communication with Professor' }
        ];
        
        // Define rating descriptions
        const ratingDescriptions = {
            1: 'Very Dissatisfied',
            2: 'Dissatisfied',
            3: 'Neutral',
            4: 'Satisfied',
            5: 'Very Satisfied'
        };
        
        // Initialize the application
        document.addEventListener('DOMContentLoaded', function() {
            // Initialize rating options
            initRatingOptions();
            
            // Initialize character counters
            initCounters();
            
            // Initialize event listeners
            initEventListeners();
            
            // Initialize navigation tabs
            initNavigation();
        });
        
        function initRatingOptions() {
            // Generate 1-5 rating options for each rating item
            ratingItems.forEach(item => {
                const container = document.getElementById(`rating-${item.id}`);
                container.innerHTML = ''; // Clear existing content
                
                for (let i = 1; i <= 5; i++) {
                    const ratingOption = document.createElement('div');
                    ratingOption.className = 'rating-option';
                    
                    const ratingNumber = document.createElement('div');
                    ratingNumber.className = 'rating-number';
                    ratingNumber.textContent = i;
                    ratingNumber.dataset.value = i;
                    ratingNumber.dataset.category = item.id;
                    
                    const ratingText = document.createElement('div');
                    ratingText.className = 'rating-text';
                    ratingText.textContent = ratingDescriptions[i];
                    
                    ratingOption.appendChild(ratingNumber);
                    ratingOption.appendChild(ratingText);
                    container.appendChild(ratingOption);
                    
                    // Add click event
                    ratingNumber.addEventListener('click', function() {
                        const value = this.dataset.value;
                        const category = this.dataset.category;
                        
                        // Remove selected state from other options in the same category
                        const siblings = this.parentElement.parentElement.querySelectorAll('.rating-number');
                        siblings.forEach(sibling => {
                            sibling.classList.remove('selected');
                        });
                        
                        // Add selected state to current option
                        this.classList.add('selected');
                        
                        // Store rating value
                        document.getElementById(`rating-${category}-value`).value = value;
                    });
                }
                
                // Add hidden input to store value
                const hiddenInput = document.createElement('input');
                hiddenInput.type = 'hidden';
                hiddenInput.id = `rating-${item.id}-value`;
                hiddenInput.name = item.id;
                container.appendChild(hiddenInput);
            });
        }
        
        function initCounters() {
            // Character counters for textareas
            document.getElementById('improvement').addEventListener('input', function() {
                document.getElementById('improvement-counter').textContent = this.value.length;
            });
            
            document.getElementById('ta-suggestions').addEventListener('input', function() {
                document.getElementById('ta-suggestions-counter').textContent = this.value.length;
            });
        }
        
        function initEventListeners() {
            // Form submission
            document.getElementById('feedbackForm').addEventListener('submit', handleFormSubmit);
            
            // Reset button
            document.getElementById('resetBtn').addEventListener('click', resetForm);
            
            // Instructor login
            document.getElementById('loginBtn').addEventListener('click', handleInstructorLogin);
            
            // Logout button
            document.getElementById('logoutBtn').addEventListener('click', handleLogout);
            
            // Export buttons
            document.getElementById('exportJsonBtn').addEventListener('click', () => exportData('json'));
            document.getElementById('exportCsvBtn').addEventListener('click', () => exportData('csv'));
            document.getElementById('exportTxtBtn').addEventListener('click', () => exportData('txt'));
            
            // Clear data button
            document.getElementById('clearDataBtn').addEventListener('click', clearAllData);
        }
        
        function initNavigation() {
            // Tab navigation
            const tabBtns = document.querySelectorAll('.tab-btn');
            tabBtns.forEach(btn => {
                btn.addEventListener('click', function() {
                    const tabId = this.dataset.tab;
                    
                    // Update active tab button
                    tabBtns.forEach(b => b.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show selected tab content
                    document.querySelectorAll('.tab-content').forEach(content => {
                        content.classList.remove('active');
                    });
                    document.getElementById(`${tabId}Tab`).classList.add('active');
                    
                    // If instructor tab, reset to login view
                    if (tabId === 'instructor') {
                        document.getElementById('loginView').style.display = 'block';
                        document.getElementById('dashboardView').style.display = 'none';
                    }
                });
            });
        }
        
        function handleFormSubmit(e) {
            e.preventDefault();
            
            // Check if all rating items are filled
            let allRated = true;
            const ratings = {};
            
            ratingItems.forEach(item => {
                const value = document.getElementById(`rating-${item.id}-value`).value;
                if (!value) {
                    allRated = false;
                    // Highlight unrated items
                    const container = document.getElementById(`rating-${item.id}`);
                    container.style.boxShadow = "0 0 0 2px #e74c3c";
                    container.style.borderRadius = "4px";
                    container.style.padding = "5px";
                } else {
                    ratings[item.id] = value;
                }
            });
            
            if (!allRated) {
                alert('Please provide a rating (1-5) for all items');
                return;
            }
            
            // Collect data
            const feedbackData = {
                id: Date.now(), // Unique ID
                ratings: ratings,
                improvement: document.getElementById('improvement').value,
                taSuggestions: document.getElementById('ta-suggestions').value,
                timestamp: new Date().toLocaleString()
            };
            
            // Save to local storage
            saveFeedback(feedbackData);
            
            // Show success message
            alert('Thank you for your feedback! Your response has been recorded anonymously.');
            
            // Reset form
            resetForm();
        }
        
        function saveFeedback(feedbackData) {
            // Get existing feedback or initialize empty array
            let allFeedback = JSON.parse(localStorage.getItem('courseFeedback') || '[]');
            
            // Add new feedback
            allFeedback.push(feedbackData);
            
            // Save back to local storage
            localStorage.setItem('courseFeedback', JSON.stringify(allFeedback));
            
            console.log(`Feedback saved. Total submissions: ${allFeedback.length}`);
        }
        
        function resetForm() {
            // Clear all rating selections
            document.querySelectorAll('.rating-number').forEach(option => {
                option.classList.remove('selected');
            });
            
            // Clear hidden input values
            ratingItems.forEach(item => {
                document.getElementById(`rating-${item.id}-value`).value = '';
            });
            
            // Clear textareas
            document.getElementById('improvement').value = '';
            document.getElementById('ta-suggestions').value = '';
            
            // Reset character counters
            document.getElementById('improvement-counter').textContent = '0';
            document.getElementById('ta-suggestions-counter').textContent = '0';
            
            // Remove highlighting
            ratingItems.forEach(item => {
                const container = document.getElementById(`rating-${item.id}`);
                container.style.boxShadow = "";
                container.style.borderRadius = "";
                container.style.padding = "";
            });
        }
        
        function handleInstructorLogin() {
            const password = document.getElementById('instructorPassword').value;
            const errorElement = document.getElementById('loginError');
            
            if (password === INSTRUCTOR_PASSWORD) {
                // Show dashboard
                document.getElementById('loginView').style.display = 'none';
                document.getElementById('dashboardView').style.display = 'block';
                
                // Load and display feedback data
                loadDashboardData();
                
                // Clear password field
                document.getElementById('instructorPassword').value = '';
                errorElement.style.display = 'none';
            } else {
                // Show error
                errorElement.style.display = 'block';
                document.getElementById('instructorPassword').value = '';
            }
        }
        
        function handleLogout() {
            // Return to login view
            document.getElementById('loginView').style.display = 'block';
            document.getElementById('dashboardView').style.display = 'none';
        }
        
        function loadDashboardData() {
            // Get all feedback from local storage
            const allFeedback = JSON.parse(localStorage.getItem('courseFeedback') || '[]');
            
            // Update statistics
            updateStatistics(allFeedback);
            
            // Display feedback list
            displayFeedbackList(allFeedback);
        }
        
        function updateStatistics(feedbackList) {
            const total = feedbackList.length;
            document.getElementById('totalSubmissions').textContent = total;
            
            if (total === 0) {
                document.getElementById('avgCourseDesign').textContent = '0.0';
                document.getElementById('avgTeachingStyle').textContent = '0.0';
                document.getElementById('avgWorkload').textContent = '0.0';
                return;
            }
            
            // Calculate averages
            let sumCourseDesign = 0;
            let sumTeachingStyle = 0;
            let sumWorkload = 0;
            let sumDiscussions = 0;
            let sumCommunication = 0;
            
            feedbackList.forEach(feedback => {
                sumCourseDesign += parseInt(feedback.ratings['course-design']);
                sumTeachingStyle += parseInt(feedback.ratings['teaching-style']);
                sumWorkload += parseInt(feedback.ratings['course-workload']);
                sumDiscussions += parseInt(feedback.ratings['discussions']);
                sumCommunication += parseInt(feedback.ratings['communication']);
            });
            
            document.getElementById('avgCourseDesign').textContent = (sumCourseDesign / total).toFixed(1);
            document.getElementById('avgTeachingStyle').textContent = (sumTeachingStyle / total).toFixed(1);
            document.getElementById('avgWorkload').textContent = (sumWorkload / total).toFixed(1);
        }
        
        function displayFeedbackList(feedbackList) {
            const container = document.getElementById('feedbackList');
            container.innerHTML = '';
            
            if (feedbackList.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: #7f8c8d; padding: 20px;">No feedback submissions yet.</p>';
                return;
            }
            
            // Display in reverse chronological order (newest first)
            feedbackList.slice().reverse().forEach((feedback, index) => {
                const feedbackItem = document.createElement('div');
                feedbackItem.className = 'feedback-item';
                
                feedbackItem.innerHTML = `
                    <div class="feedback-header">
                        <span><i class="far fa-clock"></i> ${feedback.timestamp}</span>
                        <span>Submission #${feedbackList.length - index}</span>
                    </div>
                    
                    <div class="feedback-ratings">
                        <div class="rating-display">
                            <div class="rating-value">${feedback.ratings['course-design']}/5</div>
                            <div class="rating-label-small">Course Design</div>
                        </div>
                        <div class="rating-display">
                            <div class="rating-value">${feedback.ratings['teaching-style']}/5</div>
                            <div class="rating-label-small">Teaching Style</div>
                        </div>
                        <div class="rating-display">
                            <div class="rating-value">${feedback.ratings['course-workload']}/5</div>
                            <div class="rating-label-small">Workload</div>
                        </div>
                        <div class="rating-display">
                            <div class="rating-value">${feedback.ratings['discussions']}/5</div>
                            <div class="rating-label-small">Discussions</div>
                        </div>
                        <div class="rating-display">
                            <div class="rating-value">${feedback.ratings['communication']}/5</div>
                            <div class="rating-label-small">Communication</div>
                        </div>
                    </div>
                    
                    ${feedback.improvement ? `
                    <div style="margin-top: 15px;">
                        <strong>Course Improvement:</strong>
                        <p style="margin-top: 5px; background: white; padding: 10px; border-radius: 5px;">${feedback.improvement}</p>
                    </div>
                    ` : ''}
                    
                    ${feedback.taSuggestions ? `
                    <div style="margin-top: 10px;">
                        <strong>TA Suggestions:</strong>
                        <p style="margin-top: 5px; background: white; padding: 10px; border-radius: 5px;">${feedback.taSuggestions}</p>
                    </div>
                    ` : ''}
                `;
                
                container.appendChild(feedbackItem);
            });
        }
        
        function exportData(format) {
            const feedbackList = JSON.parse(localStorage.getItem('courseFeedback') || '[]');
            
            if (feedbackList.length === 0) {
                alert('No data to export.');
                return;
            }
            
            let dataStr, filename, mimeType;
            const timestamp = new Date().toISOString().slice(0, 10);
            
            switch(format) {
                case 'json':
                    dataStr = JSON.stringify(feedbackList, null, 2);
                    filename = `course-feedback-${timestamp}.json`;
                    mimeType = 'application/json';
                    break;
                    
                case 'csv':
                    // Create CSV content
                    let csv = 'Timestamp,Course Design,Teaching Style,Course Workload,Discussions,Communication,Improvement Suggestions,TA Suggestions\n';
                    
                    feedbackList.forEach(feedback => {
                        const row = [
                            `"${feedback.timestamp.replace(/"/g, '""')}"`,
                            feedback.ratings['course-design'],
                            feedback.ratings['teaching-style'],
                            feedback.ratings['course-workload'],
                            feedback.ratings['discussions'],
                            feedback.ratings['communication'],
                            `"${(feedback.improvement || '').replace(/"/g, '""')}"`,
                            `"${(feedback.taSuggestions || '').replace(/"/g, '""')}"`
                        ];
                        csv += row.join(',') + '\n';
                    });
                    
                    dataStr = csv;
                    filename = `course-feedback-${timestamp}.csv`;
                    mimeType = 'text/csv';
                    break;
                    
                case 'txt':
                    let text = `COURSE FEEDBACK EXPORT\n`;
                    text += `Generated: ${new Date().toLocaleString()}\n`;
                    text += `Total Submissions: ${feedbackList.length}\n`;
                    text += '='.repeat(60) + '\n\n';
                    
                    feedbackList.forEach((feedback, index) => {
                        text += `SUBMISSION #${index + 1}\n`;
                        text += `Date: ${feedback.timestamp}\n\n`;
                        text += `RATINGS (1-5):\n`;
                        text += `  Course Design: ${feedback.ratings['course-design']}\n`;
                        text += `  Teaching Style: ${feedback.ratings['teaching-style']}\n`;
                        text += `  Course Workload: ${feedback.ratings['course-workload']}\n`;
                        text += `  Discussions: ${feedback.ratings['discussions']}\n`;
                        text += `  Communication: ${feedback.ratings['communication']}\n\n`;
                        
                        if (feedback.improvement) {
                            text += `COURSE IMPROVEMENT SUGGESTIONS:\n${feedback.improvement}\n\n`;
                        }
                        
                        if (feedback.taSuggestions) {
                            text += `TA SUGGESTIONS:\n${feedback.taSuggestions}\n\n`;
                        }
                        
                        text += '-'.repeat(60) + '\n\n';
                    });
                    
                    dataStr = text;
                    filename = `course-feedback-${timestamp}.txt`;
                    mimeType = 'text/plain';
                    break;
            }
            
            // Download file
            const blob = new Blob([dataStr], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = filename;
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
            URL.revokeObjectURL(url);
            
            alert(`Data exported as ${format.toUpperCase()} file.`);
        }
        
        function clearAllData() {
            if (confirm('Are you sure you want to delete ALL feedback data? This cannot be undone.')) {
                localStorage.removeItem('courseFeedback');
                alert('All feedback data has been deleted.');
                loadDashboardData(); // Refresh dashboard
            }
        }
        
        // Allow pressing Enter in password field
        document.getElementById('instructorPassword').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') {
                handleInstructorLogin();
            }
        });
    </script>
</body>
</html>